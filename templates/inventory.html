<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <a id="BTN" href="{{ url_for('dashboard') }}" class="btn btn-primary"
      >Back to Home</a
    >

    <h1><strong>Inventory</strong></h1>
    <h2>Click/Tap on a Product Name to Edit</h2>
    <table class="table">
      <thead>
        <tr>
          <th><strong>Product ID</strong></th>
          <th><strong>Name</strong></th>
          <th><strong>Description</strong></th>
          <th><strong>Price</strong></th>
          <th><strong>Quantity</strong></th>
        </tr>
      </thead>
      <tbody>
        {% for item in inventory %}
        <tr>
          <td id="tdOdd"><strong>{{ item[0] }}</strong></td>
          <td id="tdEven">
            <a href="{{ url_for('edit_product', product_id=item[0]) }}">
              <strong>{{ item[1] }}</strong>
              </a>
          </td>
          <td id="tdOdd"><strong>{{ item[2] }}</strong></td>
          <td id="tdEven"><strong>{{ item[3] }}</strong></td>
          <td id="tdOdd"><strong>{{ item[4] }}</strong></td>
          <td id="tdEven">
            <form method="POST" action="/delete_product/{{ item[0] }}">
              <button
                type="button"
                class="btn btn-danger"
                onclick='confirmDelete("{{ item[0] }}")'
              >
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <script>
      function confirmDelete(productID) {
        var result = confirm("Are you sure you want to delete this product?");
        if (result) {
          // If user confirms, submit the form
          document
            .querySelector('form[action="/delete_product/' + productID + '"]')
            .submit();
        }
      }
    </script>

    <h2>Add Product</h2>
    <form id="addProductForm" method="POST" action="/add_product">
      <div class="form-group">
        <label for="name">Name</label>
        <input
          type="text"
          class="form-control"
          id="name"
          name="name"
          required
        />
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <input
          type="text"
          class="form-control"
          id="description"
          name="description"
          required
        />
      </div>
      <div class="form-group">
        <label for="price">Price ($)</label>
        <input
          type="number"
          step=".01"
          min=".01"
          class="form-control"
          id="price"
          name="price"
          required
        />
      </div>
      <div class="form-group">
        <label for="quantity">Quantity</label>
        <input
          type="number"
          class="form-control"
          id="quantity"
          name="quantity"
          required
        />
      </div>
      <button type="submit" class="btn btn-primary">Add Product</button>
    </form>
  </body>
</html>
